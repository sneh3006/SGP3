{% extends 'base.html' %}

{% block content %}
  <h2>Manage Students</h2>

  <!-- Add Student Form -->
  <form method="post">
    {% csrf_token %}
    {{ student_form.as_p }}
    <button type="submit">Add Student</button>
  </form>

  <hr>

  <!-- List of Students -->
  <h3>Student List</h3>
  <ul>
    {% for student in students %}
      <li>
        {{ student.first_name }} {{ student.last_name }} -
        <a href="{% url 'accounts:update_student' student.id %}">Edit</a>
        <a href="{% url 'accounts:delete_student' student.id %}">Delete</a>
      </li>
    {% endfor %}
  </ul>
{% endblock %}


<a href="{% url 'accounts:delete_student' student.id %}"
   class="delete-link"
   data-confirm="Are you sure you want to delete {{ student.first_name }} {{ student.last_name }}?"
>Delete</a>

<script>
  const deleteLinks = document.querySelectorAll('.delete-link');

  deleteLinks.forEach(link => {
    link.addEventListener('click', (e) => {
      const confirmMessage = link.getAttribute('data-confirm');
      if (!confirm(confirmMessage)) {
        e.preventDefault();
      }
    });
  });
</script>
